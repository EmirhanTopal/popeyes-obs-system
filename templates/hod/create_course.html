{% extends "base.html" %}
{% load static %}

{% block title %}
Yeni Ders OluÅŸtur
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/hod/create_course.css' %}">
{% endblock %}

{% block content %}
<main class="page-wrapper py-4">

    <div class="container">

        <a href="{% url 'hod:dashboard' %}" class="btn btn-outline-secondary btn-sm mb-3">
            &larr; Geri DÃ¶n
        </a>

        <div class="card shadow-sm course-create-card">

            <div class="card-header fw-semibold">
                ğŸ†• Yeni Ders OluÅŸtur â€” {{ department.name }}
            </div>

            <div class="card-body">

                {% if error %}
                    <div class="alert alert-danger">
                        {{ error }}
                    </div>
                {% endif %}

                <!-- FORM -->
                <form method="post">
                    {% csrf_token %}

                    <!-- ================= BASIC ================= -->
                    <h5 class="section-title mb-3">ğŸ“˜ Ders Bilgileri</h5>

                    <div class="row g-3">
                        <div class="col-md-4">
                            <label class="form-label">Ders Kodu</label>
                            <input type="text" name="code" class="form-control" required>
                        </div>

                        <div class="col-md-8">
                            <label class="form-label">Ders AdÄ±</label>
                            <input type="text" name="name" class="form-control" required>
                        </div>

                        <div class="col-md-2">
                            <label class="form-label">Kredi</label>
                            <input type="number" step="0.5" name="credit" class="form-control">
                        </div>

                        <div class="col-md-2">
                            <label class="form-label">AKTS</label>
                            <input type="number" step="0.5" name="ects" class="form-control">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Seviye (Level)</label>
                            <select name="level" class="form-select">
                                {% for lvl in level_list %}
                                    <option value="{{ lvl.id }}">{{ lvl.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Ders TÃ¼rÃ¼</label>
                            <select name="course_type" class="form-select">
                                <option value="DEPARTMENT">BÃ¶lÃ¼m Dersi</option>
                                <option value="FACULTY">FakÃ¼lte Dersi</option>
                                <option value="POOL">Havuz Dersi</option>
                            </select>
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">DÃ¶nem</label>
                            <select name="semester" class="form-select">
                                <option value="1">1. DÃ¶nem</option>
                                <option value="2">2. DÃ¶nem</option>
                            </select>
                        </div>
                    </div>

                    <hr>

                    <!-- ============== TEACHERS ============== -->
                    <h5 class="section-title">ğŸ‘©â€ğŸ« Derse Atanacak Ã–ÄŸretim GÃ¶revlileri</h5>
                    <select name="teachers" class="form-select mb-3" multiple size="5">
                        {% for t in teachers %}
                            <option value="{{ t.id }}">
                                {{ t.full_name }} â€” {{ t.get_academic_title_display }}
                            </option>
                        {% endfor %}
                    </select>
                    <small class="text-muted">
                        Ctrl / Cmd ile birden fazla Ã¶ÄŸretmen seÃ§ebilirsiniz.
                    </small>

                    <hr>

                    <!-- ============== PREREQ ============== -->
                    <h5 class="section-title">ğŸ“— Ã–nkoÅŸullu Dersler</h5>
                    <select name="prerequisites" class="form-select mb-3" multiple size="5">
                        {% for c in all_courses %}
                            <option value="{{ c.id }}">
                                {{ c.code }} â€” {{ c.name }}
                            </option>
                        {% endfor %}
                    </select>

                    <!-- SUBMIT -->
                    <div class="mt-4">
                        <button class="btn btn-primary w-100 py-2 fw-semibold">
                            ğŸ’¾ Dersi Kaydet
                        </button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</main>
{% endblock %}
