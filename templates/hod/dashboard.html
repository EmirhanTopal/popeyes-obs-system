<!doctype html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <title>HOD Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background: #f5f6fa; }
        .card-header { font-weight: 600; }
        .stat-card { text-align: center; padding: 20px 10px; }
        .stat-value { font-size: 1.8rem; font-weight: 700; }
        .stat-label { font-size: .9rem; color: #666; }
    </style>
</head>

<body class="py-4">

<div class="container">

    <!-- HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold">ğŸ›ï¸ BÃ¶lÃ¼m BaÅŸkanÄ± Paneli</h3>
        <div>
            HoÅŸ geldiniz, <b>{{ username }}</b>
            <a href="/logout/" class="btn btn-sm btn-danger ms-3">Ã‡Ä±kÄ±ÅŸ Yap</a>
        </div>
    </div>

    <!-- DEPARTMENT INFO -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-0">{{ department.name }}</h5>
                <small class="text-muted">Kontenjan: {{ department.quota }}</small><br>
                <small class="text-muted">BaÅŸarÄ± OranÄ±: {{ stats.success_rate }}%</small>
            </div>
            {% if department.code %}
            <span class="badge bg-primary">BÃ¶lÃ¼m Kodu: {{ department.code }}</span>
            {% endif %}
        </div>
    </div>

    <!-- STATISTICS CARDS -->
    <div class="row mb-4 g-3">
        <div class="col-md-3">
            <div class="card stat-card shadow-sm">
                <div class="stat-value">{{ stats.total_students }}</div>
                <div class="stat-label">Ã–ÄŸrenci SayÄ±sÄ±</div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card stat-card shadow-sm">
                <div class="stat-value">{{ stats.total_teachers }}</div>
                <div class="stat-label">Ã–ÄŸretmen SayÄ±sÄ±</div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card stat-card shadow-sm">
                <div class="stat-value">{{ stats.total_courses }}</div>
                <div class="stat-label">Ders SayÄ±sÄ±</div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card stat-card shadow-sm">
                <div class="stat-value">{{ stats.success_rate }}%</div>
                <div class="stat-label">BaÅŸarÄ± OranÄ±</div>
            </div>
        </div>
    </div>

    <div class="row g-4">

        <!-- LEFT SIDE: COURSE ADD -->
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-header">ğŸ“˜ BÃ¶lÃ¼me Ders Ekle</div>
                <div class="card-body">

                    <form method="post">{% csrf_token %}

                        <div class="mb-3">
                            <label class="form-label">Ders SeÃ§</label>
                            <select name="course" class="form-select" required>
                                <option value="">Bir ders seÃ§iniz</option>
                                {% for c in courses %}
                                    <option value="{{ c.id }}">{{ c.code }} - {{ c.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">DÃ¶nem</label>
                            <input type="number" name="semester" min="1" value="1" class="form-control">
                        </div>

                        <div class="form-check mb-3">
                            <input type="checkbox" name="is_mandatory" id="mandatory" class="form-check-input">
                            <label for="mandatory" class="form-check-label">Zorunlu Ders</label>
                        </div>

                        <button class="btn btn-primary w-100">Dersi Ekle</button>
                    </form>

                </div>
            </div>
        </div>

        <!-- RIGHT SIDE: ADDED COURSES -->
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-header">ğŸ“š BÃ¶lÃ¼m Ders Listesi</div>

                <ul class="list-group list-group-flush">
                    {% for dc in dept_courses %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <b>{{ dc.course.code }}</b> â€” {{ dc.course.name }}
                                <br>
                                <small class="text-muted">{{ dc.semester }}. dÃ¶nem â€” {{ dc.is_mandatory|yesno:"Zorunlu,SeÃ§meli" }}</small>
                            </div>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-muted">Bu bÃ¶lÃ¼me henÃ¼z ders eklenmemiÅŸ.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

</div>

</body>
</html>
